"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * A generic factory for deserializing JSON recieved from input/interactive
 *
 * Create a GenericFactory from a base type (e.g. Application or Component)
 */
var GenericFactory = /** @class */ (function () {
    function GenericFactory(classes, bound_args) {
        this.classes = new Map(classes.map(function (c) { return [c.name, c]; }));
        this.bound_args = bound_args || {};
    }
    GenericFactory.prototype.resolveArgs = function (arg) {
        return Object.assign(arg, this.bound_args);
    };
    GenericFactory.prototype.createInstance = function (arg) {
        var _this = this;
        var matches = arg.etype.map(function (t) { return _this.classes.get(t); }).filter(function (t) { return !!t; });
        if (!matches.length) {
            return null;
        }
        return new matches[0](this.resolveArgs(arg));
    };
    return GenericFactory;
}());
exports.GenericFactory = GenericFactory;
//# sourceMappingURL=GenericFactory.js.map